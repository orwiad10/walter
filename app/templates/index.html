{% extends 'base.html' %}
{% block content %}
<h2>Tournaments</h2>
<p><a class="btn" href="{{ url_for('new_tournament') }}" {% if not current_user.is_authenticated or not current_user.is_admin %}style="display:none"{% endif %}>Create Tournament</a></p>
<ul class="cards">
  {% for t in tournaments %}
    <li class="card">
      <h3><a href="{{ url_for('view_tournament', tid=t.id) }}">{{ t.name }}</a></h3>
      <div>Format: {{ t.format }}</div>
      <div>Cut: {{ t.cut|upper }}</div>
      <div>Players: {{ player_counts[t.id] }}</div>
      {% if current_user.is_authenticated and current_user.is_admin %}
      <form method="post" action="{{ url_for('delete_tournament', tid=t.id) }}" onsubmit="return confirm('Delete this tournament?');">
        <button class="btn" type="submit">Delete</button>
      </form>
      {% endif %}
    </li>
  {% else %}
    <li>No tournaments yet.</li>
  {% endfor %}
</ul>
{% endblock %}
